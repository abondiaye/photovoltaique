{% extends 'base.html.twig' %}

{% block title %}DÃ©tails demande #{{ request.id }}{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>ğŸ” DÃ©tails de la demande #{{ request.id }}</h1>

    <div class="card">
        <div class="card-header">
            <strong>{{ request.fullName }}</strong> â€” {{ request.email }}
        </div>
        <div class="card-body">
            <p><strong>ğŸ“ TÃ©lÃ©phone :</strong> {{ request.phone ?? 'Non renseignÃ©' }}</p>
            <p><strong>ğŸ  Adresse :</strong> {{ request.addressLine1 }}{% if request.addressLine2 %}, {{ request.addressLine2 }}{% endif %}, {{ request.postalCode }} {{ request.city }}</p>

            <p><strong>ğŸ›  Type de demande :</strong>
                {% if request.type == constant('App\\\\Entity\\\\MaintenanceRequest::TYPE_CLEANING') %}
                    ğŸ§¹ Nettoyage
                {% elseif request.type == constant('App\\\\Entity\\\\MaintenanceRequest::TYPE_INSPECTION') %}
                    ğŸ” Inspection
                {% elseif request.type == constant('App\\\\Entity\\\\MaintenanceRequest::TYPE_REPAIR') %}
                    ğŸ›  RÃ©paration
                {% endif %}
            </p>

            <p><strong>ğŸ—“ Date souhaitÃ©e :</strong> {{ request.requestedDate|date('d/m/Y H:i') }}</p>

            <p><strong>ğŸ’¬ Commentaire :</strong> {{ request.comment ?? 'Aucun commentaire' }}</p>

            <p><strong>ğŸ“¸ Photos :</strong>
                {% if request.photos is not empty %}
                    <ul>
                        {% for photo in request.photos %}
                            <li><a href="{{ asset(photo) }}" target="_blank">Voir photo</a></li>
                        {% endfor %}
                    </ul>
                {% else %}
                    Aucune photo fournie
                {% endif %}
            </p>

            <p><strong>ğŸ“Œ Statut :</strong>
                {% if request.status == constant('App\\\\Entity\\\\MaintenanceRequest::STATUS_PENDING') %}
                    <span class="badge bg-secondary">â³ En attente</span>
                {% elseif request.status == constant('App\\\\Entity\\\\MaintenanceRequest::STATUS_CONFIRMED') %}
                    <span class="badge bg-primary">âœ… ConfirmÃ©e</span>
                {% elseif request.status == constant('App\\\\Entity\\\\MaintenanceRequest::STATUS_DONE') %}
                    <span class="badge bg-success">âœ” TerminÃ©e</span>
                {% elseif request.status == constant('App\\\\Entity\\\\MaintenanceRequest::STATUS_CANCELLED') %}
                    <span class="badge bg-danger">âŒ AnnulÃ©e</span>
                {% endif %}
            </p>

            <p><strong>ğŸ•’ CrÃ©Ã©e le :</strong> {{ request.createdAt|date('d/m/Y H:i') }}</p>
            <p><strong>ğŸ”„ Mise Ã  jour :</strong> {{ request.updatedAt|date('d/m/Y H:i') }}</p>
        </div>
    </div>

    <div class="mt-3">
        <a href="{{ path('app_maintenance_request_index') }}" class="btn btn-secondary">â¬… Retour Ã  la liste</a>
        <a href="{{ path('app_maintenance_request_edit', {id: request.id}) }}" class="btn btn-warning">âœ Modifier</a>

        {{ include('maintenance_request/_delete_form.html.twig') }}
    </div>
</div>
{% endblock %}
