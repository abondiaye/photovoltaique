{% extends 'base.html.twig' %}

{% block title %}Accueil ‚Äî Photovoltaique{% endblock %}

{% block body %}
  <section class="hero">
    <div>
      <h1 class="h-title">Net, rapide et puissant ‚Äî design soign√© pour votre √©nergie ‚òÄÔ∏è</h1>
      <p class="h-sub">Estimations instantan√©es, devis transparents et un tableau de bord √©l√©gant pour suivre votre production solaire.</p>

      <div class="cta">
        <a class="btn btn-primary" href="#devis">Obtenir un devis</a>
        <a class="btn" href="#realisations">Voir les r√©alisations</a>

        {# Bouton anim√© (int√©gr√©) #}
        <a href="#devis" style="text-decoration:none">
          <button class="button" aria-label="Aller au formulaire de devis">
            <div class="bg"></div>
            {# ton SVG splash ici #}
            <div class="wrap">
              {# ton texte anim√© ici #}
            </div>
          </button>
        </a>
      </div>
    </div>

    <div class="glass" style="height:360px; border-radius:28px; display:flex; align-items:center; justify-content:center;">
      <div style="text-align:center;">
        <div style="font-size:92px; line-height:1">üîã</div>
        <div style="opacity:.8">Widget de production en temps r√©el</div>
      </div>
    </div>
  </section>

  {# ==== Calendrier ==== #}
  <section class="dash">
    <div class="card xl glass" style="grid-column:span 12;">
      <h3 id="monthYear"></h3>
      <table id="calendarTable" style="width:100%; border-collapse:collapse; text-align:center;">
        <thead>
          <tr>
            <th>Lu</th><th>Ma</th><th>Me</th><th>Je</th><th>Ve</th><th>Sa</th><th>Di</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  {# ==== Formulaire devis ==== #}
  <section class="dash" id="devis">
    <div class="card xl glass">
      <h3>Demande de devis</h3>
      <form method="post" action="{{ path('lead_new') }}">
        <input class="btn" name="fullName" placeholder="Nom complet" required>
        <input class="btn" name="email" type="email" placeholder="Email" required>
        <input class="btn" name="phone" placeholder="T√©l√©phone">
        <input class="btn" name="roofAreaM2" type="number" step="0.1" placeholder="Surface de toit (m¬≤)">
        <select class="btn" name="hasShadow">
          <option value="0">Peu d'ombrage</option>
          <option value="1">Beaucoup d'ombrage</option>
        </select>
        <button class="btn btn-primary" style="grid-column:span 2">Envoyer</button>
      </form>
    </div>
  </section>

  <script>
    (function(){
      const today = new Date();
      const monthNames = ["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"];
      document.getElementById('monthYear').textContent = monthNames[today.getMonth()] + " " + today.getFullYear();

      const jsFirst = new Date(today.getFullYear(), today.getMonth(), 1).getDay();
      const firstDayIndex = (jsFirst + 6) % 7;
      const lastDate = new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();

      const tbody = document.querySelector('#calendarTable tbody');
      tbody.innerHTML = '';
      let date = 1;

      for(let i=0; i<6; i++){
        const tr = document.createElement('tr');
        for(let j=0; j<7; j++){
          const td = document.createElement('td');
          if(i === 0 && j < firstDayIndex || date > lastDate){
            td.textContent = '';
          } else {
            td.textContent = date;
            if(date === today.getDate()){
              td.style.background='rgba(244,177,253,.9)';
              td.style.color='#222';
              td.style.fontWeight='800';
            }
            date++;
          }
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
        if(date > lastDate) break;
      }
    })();
  </script>
{% endblock %}
